<div class="login-container">
  <h2>Login</h2>
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="field">
      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email"
        [class.invalid]="form.controls['email'].invalid && (form.controls['email'].touched || form.controls['email'].dirty)" />
      <div *ngIf="form.controls['email'].invalid && (form.controls['email'].touched || form.controls['email'].dirty)"
        class="error">
        <div *ngIf="form.controls['email'].errors?.['required']">Email é obrigatório.</div>
        <div *ngIf="form.controls['email'].errors?.['email']">Formato de email inválido.</div>
      </div>
    </div>

    <div class="field">
      <label for="password">Senha</label>
      <input id="password" type="password" formControlName="password"
        [class.invalid]="form.controls['password'].invalid && (form.controls['password'].touched || form.controls['password'].dirty)" />
      <div
        *ngIf="form.controls['password'].invalid && (form.controls['password'].touched || form.controls['password'].dirty)"
        class="error">
        <div *ngIf="form.controls['password'].errors?.['required']">Senha é obrigatória.</div>
        <div *ngIf="form.controls['password'].errors?.['minlength']">A senha precisa ter ao menos 6 caracteres.</div>
      </div>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>

    <button type="submit" [disabled]="loading || form.invalid">{{ loading ? 'Entrando...' : 'Entrar' }}</button>
  </form>
  <p>
    Ainda não tem conta? <a routerLink="/auth/register">Registrar</a>
  </p>
</div>
